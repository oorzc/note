(window.webpackJsonp=window.webpackJsonp||[]).push([[184],{821:function(e,t,s){"use strict";s.r(t);var r=s(5),n=Object(r.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"信令服务器搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#信令服务器搭建"}},[e._v("#")]),e._v(" 信令服务器搭建")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/u011077027/article/details/86225524",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/xdq1985/article/details/113914110?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_utm_term-0&spm=1001.2101.3001.4242",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考1"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/weixin_35937808/article/details/103970217?utm_term=%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BAwebrtc%E6%9C%8D%E5%8A%A1%E5%99%A8&utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~all~sobaiduweb~default-2-103970217&spm=3001.4430",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考2"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/ledphz/p/11518755.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考3"),s("OutboundLink")],1)]),e._v(" "),s("h2",{attrs:{id:"安装turn服务器的环境准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装turn服务器的环境准备"}},[e._v("#")]),e._v(" 安装turn服务器的环境准备")]),e._v(" "),s("p",[e._v("yum install openssl openssl-libs libevent2 libevent-devel\nyum install openssl-devel\nyum install sqlite\nyum install sqlite-devel\nyum install postgresql-devel\nyum install postgresql-server\nyum install mysql-devel\nyum install mysql-server\nyum install hiredis\nyum install hiredis-devel")]),e._v(" "),s("h2",{attrs:{id:"开始安装turn服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开始安装turn服务器"}},[e._v("#")]),e._v(" 开始安装turn服务器")]),e._v(" "),s("p",[e._v("git clone https://github.com/coturn/coturn\ncd coturn\n./configure\nmake\nsudo make install")]),e._v(" "),s("h2",{attrs:{id:"查看是否安装成功"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看是否安装成功"}},[e._v("#")]),e._v(" 查看是否安装成功")]),e._v(" "),s("p",[e._v("which turnserver")]),e._v(" "),s("h2",{attrs:{id:"生成证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生成证书"}},[e._v("#")]),e._v(" 生成证书")]),e._v(" "),s("p",[e._v("一直回车就可以了\nsudo openssl req -x509 -newkey rsa:2048 -keyout /etc/turn_server_pkey.pem -out /etc/turn_server_cert.pem -days 99999 -nodes")]),e._v(" "),s("h2",{attrs:{id:"成用户名和密码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#成用户名和密码"}},[e._v("#")]),e._v(" 成用户名和密码")]),e._v(" "),s("p",[e._v("turnadmin -k -u zc -p 123456 -r demo")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("0xfb76c57e823de97df580e573437ef54a\n0: log file opened: /var/log/turn_1791_2019-07-31.log\n0: SQLite connection was closed.\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("密匙保存下来")]),e._v(" "),s("h2",{attrs:{id:"修改配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件"}},[e._v("#")]),e._v(" 修改配置文件")]),e._v(" "),s("p",[e._v("sudo cp /usr/local/etc/turnserver.conf.default  /usr/local/etc/turnserver.conf")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("listening-port=3478 #监听端口\nlistening-device=eth0 #监听的网卡\nrelay-device=eth0  #中转网卡\n#listening-ip=172.30.94.4   #内网ip \ntls-listening-port=5349 \n#relay-ip=172.30.94.4   #内网ip\nexternal-ip=47.115.165.230   #外网ip \nrelay-threads=50 \nuser=zc:123456  \nlt-cred-mech \ncert=/etc/turn_server_cert.pem \npkey=/etc/turn_server_pkey.pem \nmin-port=49152 \nmax-port=65535\nuserdb=/etc/turnuserdb.conf\n#turnuserdb.conf中的用户名和密码，可以有多个\n#user=ytest:0x36f65151a0636f98c27dc77e50836675  \n#一般与turnadmin创建用户时指定的realm一致，不指定realm时，默认为: 外网地址:3478\nrealm=demo \ncli-password=qwerty #不开启会报CONFIG ERROR: Empty cli-password, and so telnet cli interface is disabled! Please set a non empty cli-password!错误\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br")])]),s("h2",{attrs:{id:"启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[e._v("#")]),e._v(" 启动")]),e._v(" "),s("p",[e._v("turnserver -o -a -f -user=zc:123456 -r demo")]),e._v(" "),s("p",[e._v("lsof -i:3478校验下是否启动成功")]),e._v(" "),s("h2",{attrs:{id:"停止turn-sever"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#停止turn-sever"}},[e._v("#")]),e._v(" 停止turn sever")]),e._v(" "),s("p",[e._v("ps -ef|grep turnserver\nkill -9 xxxx")]),e._v(" "),s("h2",{attrs:{id:"强制关闭某个端口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#强制关闭某个端口"}},[e._v("#")]),e._v(" 强制关闭某个端口")]),e._v(" "),s("p",[e._v("sudo fuser -k -n tcp 9111")]),e._v(" "),s("h2",{attrs:{id:"检测"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#检测"}},[e._v("#")]),e._v(" 检测")]),e._v(" "),s("p",[e._v("https://webrtc.github.io/samples/src/content/peerconnection/trickle-ice/")])])}),[],!1,null,null,null);t.default=n.exports}}]);