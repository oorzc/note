(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{833:function(s,a,n){"use strict";n.r(a);var t=n(5),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"redis-安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis-安装"}},[s._v("#")]),s._v(" redis 安装")]),s._v(" "),n("p",[s._v("Windows 安装")]),s._v(" "),n("blockquote",[n("p",[s._v("https://www.cnblogs.com/lezhifang/p/7027903.html")])]),s._v(" "),n("p",[s._v("Linux 安装")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("下载，解压，编译")]),s._v(" "),n("p",[s._v("$ cd /usr/local\n$ wget http://download.redis.io/releases/redis-3.2.8.tar.gz\n$ tar -xzf redis-3.2.8.tar.gz\n$ cd redis-3.2.8\n$ make")])]),s._v(" "),n("li",[n("p",[s._v("编译完成后，在 src 目录下，有四个可执行文件 redis-server、redis-benchmark、redis-cli 和 redis.conf。然后拷贝到一个目录下。\n（注意：redis.conf 并不在 src 目录下面，它在解压的根目录下面）")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("mkdir /usr/redis\ncp redis-server  /usr/redis     (redis的src目录)\ncp redis-benchmark /usr/redis   (redis的src目录)\ncp redis-cli /usr/redis     (redis的src目录)\ncp redis.conf /usr/redis   (redis目录)\ncd /usr/redis\n\n修改redis.conf\n")])])])])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/redis.conf\n    "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0\n    port "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n    daemonize "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#守护进程运行")]),s._v("\n    protected-mode no "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#保护模式关闭 线上设置密码")]),s._v("\n    requirepass  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#密码设置")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[n("p",[s._v("启动 redis 服务\n$ /usr/redis/redis-server /usr/redis/redis.conf")])]),s._v(" "),n("li",[n("p",[s._v("设置后台运行\n在/usr/redis 下修改 redis.conf 找到 daemonize no 改为 yes;保存；")])])]),s._v(" "),n("h2",{attrs:{id:"安装-php-redis-扩展"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-php-redis-扩展"}},[s._v("#")]),s._v(" 安装 php-redis 扩展")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("安装编译工具")]),s._v(" "),n("p",[s._v("yum install wget make gcc gcc-c++ zlib-devel openssl openssl-devel pcre-devel kernel keyutils patch perl")])]),s._v(" "),n("li",[n("p",[s._v("下载扩展包")]),s._v(" "),n("p",[s._v("wget https://github.com/phpredis/phpredis/archive/develop.zip\nunzip develop.zip\ncd phpredis-develop //php-redis 解压后的文件夹名称 #用 phpize 生成 configure 配置文件 如果 phpize 报错，安装 php-devel#\n/usr/bin/phpize\n./configure --with-php-config=/usr/local/php/bin/php-config\nmake\nmake install")])]),s._v(" "),n("li",[n("p",[s._v("添加扩展\nvi /usr/local/php/etc/php.ini\n/ 全速定位到 extension_dir,然后添加 extension=redis.so")])])]),s._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[n("p",[s._v("redis 自启脚本\nvi /etc/init.d/redis\n保存后设置权限\nchmod 755 /etc/init.d/redis")])]),s._v(" "),n("li",[n("p",[s._v("启动测试\n/etc/init.d/redis start")])]),s._v(" "),n("li",[n("p",[s._v("设置开机自启动\nchkconfig redis on")])])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/usr/bin")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chkconfig: 2345 10 90")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# description: Start and Stop redis")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/bin:/sbin:/usr/bin:/bin\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REDISPORT")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("EXEC")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/redis/redis-server\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REDIS_CLI")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/redis/redis-cli\n\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PIDFILE")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/run/redis.pid\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CONF")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/redis/redis.conf"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#AUTH="1234"')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n        start"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -f "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PIDFILE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n                        "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PIDFILE")]),s._v(' exists, process is already running or crashed."')]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n                        "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Starting Redis server..."')]),s._v("\n                        "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$EXEC")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CONF")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v('"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n                        "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Redis is running..."')]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        stop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -f "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PIDFILE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n                        "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PIDFILE")]),s._v(' exists, process is not running."')]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n                        "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PID")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" $PIDFILE"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n                        "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Stopping..."')]),s._v("\n                       "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$REDIS_CLI")]),s._v(" -p "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$REDISPORT")]),s._v("  SHUTDOWN\n                        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n                       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -x "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PIDFILE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n                                "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Waiting for Redis to shutdown..."')]),s._v("\n                               "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n                        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n                        "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Redis stopped"')]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        restart"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("force-reload"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${0}")]),s._v(" stop\n                "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${0}")]),s._v(" start\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        *"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n               "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Usage: /etc/init.d/redis {start|stop|restart|force-reload}"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&2")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br")])]),n("p",[s._v("配置环境变量 使用 redis-cli\nhttps://www.jianshu.com/p/10baa32b2cd9")]),s._v(" "),n("p",[s._v("修改密码\nredis-cli -p 6379 -a zc123456")]),s._v(" "),n("p",[s._v("auth zc123456")]),s._v(" "),n("p",[s._v("配置外网可访问\nhttps://blog.csdn.net/dddggg/article/details/54407381")]),s._v(" "),n("h2",{attrs:{id:"linux-安装-swoole-拓展"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#linux-安装-swoole-拓展"}},[s._v("#")]),s._v(" Linux 安装 swoole 拓展")]),s._v(" "),n("blockquote",[n("p",[s._v("https://wiki.swoole.com/wiki/page/6.html\n一键安装 pecl install swoole")])])])}),[],!1,null,null,null);a.default=e.exports}}]);