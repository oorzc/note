(window.webpackJsonp=window.webpackJsonp||[]).push([[183],{827:function(s,n,a){"use strict";a.r(n);var e=a(5),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"svn仓库搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#svn仓库搭建"}},[s._v("#")]),s._v(" svn仓库搭建")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("* 首先输入rpm -qa | grep subversion 查看SVN是否已经安装过\nyum install subversion 安装\n* 输入rpm -ql subversion查看安装位置\n*  /usr/bin/svnversion --version 就可以查看svn的版本\n* 创建svn版本库目录\nmkdir -p /home/svn/my\nsvnadmin create /home/svn/my\n* 进入/home/svn/my/conf目录（该svn版本库配置文件）\nauthz passwd 放到/home/svn 设置为公共文件 svnserve.conf引入该2文件即可\nauthz文件是权限控制文件\npasswd是帐号密码文件\nsvnserve.conf SVN服务配置文件\n\n完成下面整个操作 再到在本地获取仓库\n")])])]),a("h2",{attrs:{id:"设置帐号密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置帐号密码"}},[s._v("#")]),s._v(" 设置帐号密码")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("passwd\n在[users]块中添加用户和密码，\n格式：帐号=密码\n[users]\nmy = myssecret\nsally = sallyssecret\nbote = botessecret\n")])])]),a("h2",{attrs:{id:"设置权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置权限"}},[s._v("#")]),s._v(" 设置权限")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("authz\n在末尾添加如下代码：\n[my:/]\ndan=rw\nw=r\n意思是版本库的根目录dan对其有读写权限，w只有读权限。\n\n用户组权限\n[groups]\nmy1 = harry，my\nmy2 = sally\n[my1:/]\n@my1 = rw\n@my2 = r\n\n[my2:/]\n@my2 = rw\nbote = rw\n\n\n注：\n[/],表示根目录及以下，根目录是svnserve启动时指定的，我们指定为/home/svn，\n[/]就是表示对全部版本库设置权限。\n[my:/] 表示对版本库svntest设置权限\n[my:/abc] 表示对版本库svntest中的abc项目设置权限\n[my:/abc/aaa] 表示对版本库svntest中的abc项目的aaa目录设置权限\n\n\n* 修改svnserve.conf文件\n打开下面的几个注释：\nanon-access = none #匿名用户不可操作\nauth-access = write #授权用户可写\npassword-db = ../../passwd #使用哪个文件作为账号文件\nauthz-db = ../../authz #使用哪个文件作为权限文件\n")])])]),a("h2",{attrs:{id:"启动svn版本库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动svn版本库"}},[s._v("#")]),s._v(" 启动svn版本库")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("svnserve -d -r /home/svn/\n\n* 查看svn服务是否正常启动，执行如下命令：\nps -ef|grep svn|grep -v grep\n")])])]),a("h2",{attrs:{id:"停止重启svn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#停止重启svn"}},[s._v("#")]),s._v(" 停止重启SVN")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("停止\nkillall svnserve\n启动\nsvnserve -d -r /home/svn/\n")])])]),a("h2",{attrs:{id:"客服端链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#客服端链接"}},[s._v("#")]),s._v(" 客服端链接")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v('svn://192.168.x.x/my\n然后，输入用户名密码；\n\n* 开启自启动SVN服务器\n打开/etc/rc.local文件\n加入svnserve -d -r /home/svn/\n\n\n* SVN提交文件自动更新到nginx的WEB目录\ncd /home/svn/my/hooks\nvi post-commit #编辑，添加以下代码\n\n\n#!/bin/sh\n#设定环境变量，如果没有设定可能会出现update报错\nREPOS="$1"\nREV="$2"\nexport LC_CTYPE="en_US.UTF-8"\nSVN_PATH=/usr/bin/svn\n#web目录，如果你的不同，可以改\nWEB_PATH=/home/wwwroot/xjz\nLOG_PATH=/tmp/svn_update.log  #同步日志\necho `whoami`,$REPOS,$REV >> $LOG_PATH\n#这里的用户随便一个就好\n$SVN_PATH update $WEB_PATH --username \'username\' --password \'***\'\n\n#或者\n#!/bin/sh\nREPOS="$1"\nREV="$2"\nexport LANG="zh_CN.UTF-8"\nsvn update /www/htdocs/vue-doc --username root --password root123 --no-auth-cache\n\n* 添加脚本执行权限\ncd /home/svn/my/hooks\nchmod 777 post-commit\n\nsvnserve -d -r /home/svn/\n\n* 进入WEB根目录, 创建SVN仓库副本：\ncd /home/wwwroot\nsvn co svn://192.168.x.x/my --username my --password mypassword\nsvn co svn://120.78.219.51/cai.oorzc.cn --username xxx --password xxxx\n')])])]),a("h2",{attrs:{id:"svn命令行操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#svn命令行操作"}},[s._v("#")]),s._v(" SVN命令行操作")]),s._v(" "),a("p",[s._v("添加新文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("svn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" * \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("提交更新")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("svn ci -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'up'")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("更新文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("svn　update  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("忽略文件（未加入版本控制）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("svn propset svn:ignore "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'database.php'")]),s._v(" ./\n\nsvn ci -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ignore a directory called \"database.php\".'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("忽略文件（已加入版本控制，先复制删除后，再添加）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1、先把 database.php 文件备份成 database.php-tmp")]),s._v("\nsvn "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" database.php database.php-tmp\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2、删掉原文件")]),s._v("\nsvn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" database.php\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3、提交修改信息")]),s._v("\nsvn ci -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Removing added file \"database.php\".'")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#4、把 database.php-tmp 还原成 database.php")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" database.php-tmp database.php\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#5、重新进行忽略步骤")]),s._v("\nsvn propset svn:ignore "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'database.php'")]),s._v(" ./\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#6、提交忽略新修改")]),s._v("\nsvn ci -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Ignoring a directory called \"database.php\".'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("忽略文件夹")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('1.配置SVN默认编辑器\nvi ~/.bash_profile\n最后一行加上：\nexport SVN_EDITOR=vim  # 定义svn editor为vim编辑\n2.让配置生效\nsource ~/.bash_profile\n3.设置忽略文件：\n先切换到项目目录，如test\n输入：\nsvn propedit svn:ignore .  # .号需加上，代表当前目录；\n输入需要忽略的文件/文件夹\n如：\nconf/db.php   #代表忽略conf文件下db.php这个文件\nuploads       #代表忽略uploads这个文件夹\n以上忽略的文件都是该项目目录的相对路径！\n\nsvn提交时把node_modules忽略掉\n空白处右键>选中TortoiseSVN>设置(settings)>常规设置(General)>Subversion>编辑(edit)>在弹出的config文件中找global-ignores，复制一行下来，去掉global-ignores前的#。\n如果是"文件夹" global-ignores = *node_modules\n如果是文件  global-ignores = .project .git\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);