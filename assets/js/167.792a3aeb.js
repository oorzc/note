(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{896:function(s,a,t){"use strict";t.r(a);var n=t(5),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"其他直播系统搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他直播系统搭建"}},[s._v("#")]),s._v(" 其他直播系统搭建")]),s._v(" "),t("blockquote",[t("p",[s._v("https://hub.docker.com/repository/docker/ar414/nginx-rtmp-ffmpeg")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.ar414.com/ar414-nginx-rtmp-ffmpeg.png",alt:"ar414-nginx-rtmp-ffmpeg"}})]),s._v(" "),t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),t("blockquote",[t("p",[s._v("最近帮朋友的公司部署了一套分流+水印的直播系统")]),s._v(" "),t("p",[s._v("顺手打包成 docker 镜像，方便大家需要用到的时候开箱即用，不需要百度一些零碎的文章\n也可做简单的直播服务，只需调整配置文件便可达到你的需求.")]),s._v(" "),t("p",[s._v("需求：将直播流分流到两个云厂商的直播云，一个有水印，一个无水印。使用 hls 播放")]),s._v(" "),t("p",[s._v("朋友需求的拓扑示意图：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.ar414.com/ar414-nginx-rtmp.png",alt:"ar414-nginx-rtmp"}})]),s._v(" "),t("p",[s._v("当前拓扑示意图（阿里云和腾讯云不方便放出推流和拉流地址，有兴趣的同学可以去申请玩一下）")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.ar414.com/nginx-live-service.png?a=1",alt:"ar414-nginx-service"}})])]),s._v(" "),t("h2",{attrs:{id:"docker-nginx-rtmp-ffmpeg"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-nginx-rtmp-ffmpeg"}},[s._v("#")]),s._v(" "),t("a",{attrs:{href:"https://hub.docker.com/repository/docker/ar414/nginx-rtmp-ffmpeg",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker-nginx-rtmp-ffmpeg"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("基于"),t("a",{attrs:{href:"https://github.com/alfg/docker-nginx-rtmp",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker-nginx-rtmp"),t("OutboundLink")],1),s._v("进行配置部署，这篇文章的意义是实现直播分流及直播画面水印.")]),s._v(" "),t("ul",[t("li",[s._v("Nginx 1.16.1（从源代码编译的稳定版本）")]),s._v(" "),t("li",[s._v("nginx-rtmp-module 1.2.1（从源代码编译）")]),s._v(" "),t("li",[s._v("ffmpeg 4.2.1（从源代码编译）")]),s._v(" "),t("li",[s._v("已配置好的"),t("a",{attrs:{href:"https://github.com/ar414-com/nginx-rtmp-ffmpeg-conf/blob/master/nginx.conf",target:"_blank",rel:"noopener noreferrer"}},[s._v("nginx.conf"),t("OutboundLink")],1),s._v(" "),t("ul",[t("li",[s._v("只支持 1920*1080（如需支持其他分辨率可参考"),t("a",{attrs:{href:"https://github.com/alfg/docker-nginx-rtmp/blob/master/nginx.conf",target:"_blank",rel:"noopener noreferrer"}},[s._v("nginx.conf"),t("OutboundLink")],1),s._v("）")]),s._v(" "),t("li",[s._v("实现两路分流\n"),t("ul",[t("li",[s._v("本机")]),s._v(" "),t("li",[s._v("直播云（例：阿里云、腾讯云、ucloud）")])])]),s._v(" "),t("li",[s._v("实现直播水印效果\n"),t("ul",[t("li",[s._v("水印图片存放位置（容器内）：/opt/images/logo.png")])])])])])]),s._v(" "),t("h2",{attrs:{id:"部署运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署运行"}},[s._v("#")]),s._v(" 💻部署运行")]),s._v(" "),t("h2",{attrs:{id:"服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务器"}},[s._v("#")]),s._v(" 服务器")]),s._v(" "),t("ul",[t("li",[s._v("安装 docker(Centos7,其他系统请发挥你的搜索功能)")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装docker")]),s._v("\n$ systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" docker "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置开机启动")]),s._v("\n$ systemctl start docker "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动docker服务")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("拉取 docker 镜像并运行")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果速度慢可使用阿里云：docker pull registry.cn-shenzhen.aliyuncs.com/ar414/nginx-rtmp-ffmpeg:v1")]),s._v("\n$ docker pull ar414/nginx-rtmp-ffmpeg\n$ docker run -it -d -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1935")]),s._v(":1935 -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":80 --rm ar414/nginx-rtmp-ffmpeg\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("推流地址（Stream live content to）：")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("rtmp://<server ip>:1935/stream/$STREAM_NAME\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("SSL 证书")])]),s._v(" "),t("p",[s._v("将证书复制到容器内，并在容器内修改 nginx.conf 配置文件，然后重新 commit（操作容器内的文件都需要重新 commit 才会生效）")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("#/etc/nginx/nginx.conf\nlisten 443 ssl;\nssl_certificate     /opt/certs/example.com.crt;\nssl_certificate_key /opt/certs/example.com.key;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"obs-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#obs-配置"}},[s._v("#")]),s._v(" OBS 配置")]),s._v(" "),t("ul",[t("li",[s._v("Stream Type: "),t("code",[s._v("Custom Streaming Server")])]),s._v(" "),t("li",[s._v("URL: "),t("code",[s._v("rtmp://<server ip>:1935/stream")])]),s._v(" "),t("li",[s._v("Stream Key：ar414\n"),t("img",{attrs:{src:"https://cdn.ar414.com/obs-config.png",alt:"obs-config"}})])]),s._v(" "),t("h2",{attrs:{id:"观看测试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#观看测试"}},[s._v("#")]),s._v(" 观看测试")]),s._v(" "),t("blockquote",[t("p",[s._v("HLS 播放测试工具：http://player.alicdn.com/aliplayer/setting/setting.html （如果配置了证书则使用 https）")])]),s._v(" "),t("ul",[t("li",[s._v("HLS 播放地址\n"),t("ul",[t("li",[s._v("有水印：http://<server ip>:8080/hls/ar414_wm.m3u8\n"),t("img",{attrs:{src:"https://cdn.ar414.com/ar414-hls-wm.png",alt:"ar414-hls-wm"}})]),s._v(" "),t("li",[s._v("无水印：http://<server ip>:8080/hls/ar414.m3u8\n"),t("img",{attrs:{src:"https://cdn.ar414.com/ar414-hls.png",alt:"ar414-hls"}})])])])]),s._v(" "),t("blockquote",[t("p",[s._v("RTMP 测试工具："),t("a",{attrs:{href:"https://daumpotplayer.com/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("PotPlayer"),t("OutboundLink")],1)])]),s._v(" "),t("ul",[t("li",[s._v("RTMP 播放地址\n"),t("ul",[t("li",[s._v("无水印：rtmp://<server ip>:1935/stream/ar414\n"),t("img",{attrs:{src:"https://cdn.ar414.com/ar414-rtmp.png",alt:"ar414-rtmp"}})]),s._v(" "),t("li",[s._v("有水印：需要分流到其他服务器上")])])])]),s._v(" "),t("h2",{attrs:{id:"配置文件简解（分流、水印及水印位置）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置文件简解（分流、水印及水印位置）"}},[s._v("#")]),s._v(" 📄配置文件简解（分流、水印及水印位置）")]),s._v(" "),t("blockquote",[t("p",[t("a",{attrs:{href:"https://github.com/ar414-com/nginx-rtmp-ffmpeg-conf/blob/master/nginx.conf",target:"_blank",rel:"noopener noreferrer"}},[s._v("完整配置文件"),t("OutboundLink")],1)])]),s._v(" "),t("ul",[t("li",[s._v("RTMP 配置")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rtmp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        listen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1935")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#端口")]),s._v("\n        chunk_size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#RTMP 直播流配置")]),s._v("\n        application stream "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            live on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#添加水印及分流，这次方便测试直接分流到当前服务器hls")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#实际生产一般都分流到直播云（腾讯云、阿里云、ucloud）")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#只需把需要分流的地址替换即可")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#有水印：rtmp://localhost:1935/hls/$name_wm")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#无水印：rtmp://localhost:1935/hls/$name")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" ffmpeg -i rtmp://localhost:1935/stream/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),s._v(" -i /opt/images/ar414.png\n              -filter_complex "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"overlay=10:10,split=1[ar414]"')]),s._v("\n              -map "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[ar414]'")]),s._v(" -map "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":a -s 1920x1080 -c:v libx264 -c:a aac -g "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -r "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -tune zerolatency -preset veryfast -crf "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" -f flv rtmp://localhost:1935/hls/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name_wm")]),s._v("\n              -c:a libfdk_aac -b:a 128k -c:v libx264 -b:v 2500k -f flv -g "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -r "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -s 1920x1080 -preset superfast -profile:v baseline rtmp://localhost:1935/hls/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        application hls "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            live on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            hls on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            hls_fragment "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            hls_path /opt/data/hls"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("ul",[t("li",[s._v("如果需要推多个直播云则复制多个 exec ffmpeg 即可 如下：")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("application stream "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    live on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#分流至本机hls")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" ffmpeg -i rtmp://localhost:1935/stream/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),s._v(" -i /opt/images/ar414.png\n      -filter_complex "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"overlay=10:10,split=1[ar414]"')]),s._v("\n      -map "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[ar414]'")]),s._v(" -map "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":a -s 1920x1080 -c:v libx264 -c:a aac -g "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -r "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -tune zerolatency -preset veryfast -crf "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" -f flv rtmp://localhost:1935/hls/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name_wm")]),s._v("\n      -c:a libfdk_aac -b:a 128k -c:v libx264 -b:v 2500k -f flv -g "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -r "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -s 1920x1080 -preset superfast -profile:v baseline rtmp://localhost:1935/hls/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#分流至腾讯云")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" ffmpeg -i rtmp://localhost:1935/stream/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),s._v(" -i /opt/images/ar414.png\n      -filter_complex "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"overlay=10:10,split=1[ar414]"')]),s._v("\n      -map "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[ar414]'")]),s._v(" -map "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":a -s 1920x1080 -c:v libx264 -c:a aac -g "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -r "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -tune zerolatency -preset veryfast -crf "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" -f flv rtmp://live-push.tencent.com/stream/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name_wm")]),s._v("\n      -c:a libfdk_aac -b:a 128k -c:v libx264 -b:v 2500k -f flv -g "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -r "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -s 1920x1080 -preset superfast -profile:v baseline rtmp://live-push.tencent.com/stream/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#分流至阿里云")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" ffmpeg -i rtmp://localhost:1935/stream/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),s._v(" -i /opt/images/ar414.png\n      -filter_complex "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"overlay=10:10,split=1[ar414]"')]),s._v("\n      -map "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[ar414]'")]),s._v(" -map "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":a -s 1920x1080 -c:v libx264 -c:a aac -g "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -r "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -tune zerolatency -preset veryfast -crf "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" -f flv rtmp://live-push.aliyun.com/stream/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name_wm")]),s._v("\n      -c:a libfdk_aac -b:a 128k -c:v libx264 -b:v 2500k -f flv -g "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -r "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" -s 1920x1080 -preset superfast -profile:v baseline rtmp://live-push.aliyun.com/stream/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("ul",[t("li",[s._v("水印位置\n"),t("ul",[t("li",[t("p",[s._v("水印位置")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("水印图片位置")]),s._v(" "),t("th",[s._v("overlay 值")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("左上角")]),s._v(" "),t("td",[s._v("10:10")])]),s._v(" "),t("tr",[t("td",[s._v("右上角")]),s._v(" "),t("td",[s._v("main_w-overlay_w-10:10")])]),s._v(" "),t("tr",[t("td",[s._v("左下角")]),s._v(" "),t("td",[s._v("10:main_h-overlay_h-10")])]),s._v(" "),t("tr",[t("td",[s._v("右下角")]),s._v(" "),t("td",[s._v("main_w-overlay_w-10 : main_h-overlay_h-10")])])])])]),s._v(" "),t("li",[t("p",[s._v("overlay 参数")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("参数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("main_w")]),s._v(" "),t("td",[s._v("视频单帧图像宽度（当前配置文件 1920）")])]),s._v(" "),t("tr",[t("td",[s._v("main_h")]),s._v(" "),t("td",[s._v("视频单帧图像高度（当前配置文件 1080）")])]),s._v(" "),t("tr",[t("td",[s._v("overlay_w")]),s._v(" "),t("td",[s._v("水印图片的宽度")])]),s._v(" "),t("tr",[t("td",[s._v("overlay_h")]),s._v(" "),t("td",[s._v("水印图片的高度")])])])])])])])]),s._v(" "),t("h2",{attrs:{id:"nginx-配置示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-配置示例"}},[s._v("#")]),s._v(" nginx 配置示例")]),s._v(" "),t("div",{staticClass:"language-nginx line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-nginx"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("daemon")]),s._v(" off"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("error_log")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dev"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("stdout info"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("events")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("worker_connections")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nrtmp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1935")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        chunk_size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        application stream "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            live on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n            exec ffmpeg "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("i rtmp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1935")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("stream"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("images"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ar414"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("png\n              "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("filter_complex "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"overlay=10:10,split=1[ar414]"')]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("map")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[ar414]'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("map")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("a "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1920")]),s._v("x1080 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("v libx264 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("a aac "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("r "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("tune zerolatency "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("preset veryfast "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("crf "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("flv")]),s._v(" rtmp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1935")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hls"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name_wm")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("a libfdk_aac "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("a "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("k "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("v libx264 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("v "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2500")]),s._v("k "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("flv")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("r "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1920")]),s._v("x1080 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("preset superfast "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("profile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("v baseline rtmp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1935")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hls"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        application hls "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            live on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            hls on"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            hls_fragment "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            hls_path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hls"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("http")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("access_log")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dev"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("stdout combined"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_ciphers")]),s._v("         HIGH"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("aNULL"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("MD5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_protocols")]),s._v("       TLSv1 TLSv1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" TLSv1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_session_cache")]),s._v("   shared"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SSL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_session_timeout")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Uncomment these lines to enable SSL.")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Update the ssl paths with your own certificate and private key.")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# listen 443 ssl;")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ssl_certificate     /opt/certs/example.com.crt;")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ssl_certificate_key /opt/certs/example.com.key;")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hls "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("types")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                application"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("vnd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("apple"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mpegurl m3u8"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n                video"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mp2t ts"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add_header")]),s._v(" Cache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Control no"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add_header")]),s._v(" Access"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Control"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Allow")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Origin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("live "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alias")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hls"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("types")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n              application"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("vnd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("apple"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mpegurl m3u8"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n              video"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mp2t ts"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add_header")]),s._v(" Cache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Control no"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add_header")]),s._v(" Access"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Control"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Allow")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Origin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("stat "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            rtmp_stat all"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            rtmp_stat_stylesheet static"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("stat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("static "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alias")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("www"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("static"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("location")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("crossdomain"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xml "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("www"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("static"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default_type")]),s._v(" text"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("xml"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("expires")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("h"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);